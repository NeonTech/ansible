{
  "root": "{{ step_ca_data.path }}/certs/root_ca.crt",
  "federatedRoots": null,
  "crt": "{{ step_ca_data.path }}/certs/intermediate_ca.crt",
  "key": "yubikey:slot-id={{ step_ca_yubikey_intermediate_slot }}",
  "kms": {
    "type": "yubikey",
    "pin": "{{ step_ca_yubikey_pin }}"
  },
  "address": ":{{ step_ca_port }}",
  "insecureAddress": "",
  "dnsNames": {{ step_ca_dns_names | to_json }},
  {# TODO
  "ssh": {
    "hostKey": "yubikey:slot-id={{ step_ca_yubikey_ssh_host_slot }}",
    "userKey": "yubikey:slot-id={{ step_ca_yubikey_ssh_user_slot }}"
  },
  #}
  "logger": {
    "format": "text"
  },
  "db": {
    "type": "postgresql",
    "dataSource": "postgresql://{{ step_ca_postgresql_username }}:{{ step_ca_postgresql_password }}@{{ step_ca_postgresql_host }}:{{ step_ca_postgresql_port }}/{{ step_ca_postgresql_database }}"
  },
  "authority": {
    "enableAdmin": true
  },
  "tls": {
    "cipherSuites": [
      "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
      "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256"
    ],
    "minVersion": 1.2,
    "maxVersion": 1.3,
    "renegotiation": false
  },
  "templates": {
    "ssh": {
      "user": [
        {
          "name": "config.tpl",
          "type": "snippet",
          "template": "templates/ssh/config.tpl",
          "path": "~/.ssh/config",
          "comment": "#"
        },
        {
          "name": "step_includes.tpl",
          "type": "prepend-line",
          "template": "templates/ssh/step_includes.tpl",
          "path": "${STEPPATH}/ssh/includes",
          "comment": "#"
        },
        {
          "name": "step_config.tpl",
          "type": "file",
          "template": "templates/ssh/step_config.tpl",
          "path": "ssh/config",
          "comment": "#"
        },
        {
          "name": "known_hosts.tpl",
          "type": "file",
          "template": "templates/ssh/known_hosts.tpl",
          "path": "ssh/known_hosts",
          "comment": "#"
        }
      ],
      "host": [
        {
          "name": "sshd_config.tpl",
          "type": "snippet",
          "template": "templates/ssh/sshd_config.tpl",
          "path": "/etc/ssh/sshd_config",
          "comment": "#",
          "requires": ["Certificate", "Key"]
        },
        {
          "name": "ca.tpl",
          "type": "snippet",
          "template": "templates/ssh/ca.tpl",
          "path": "/etc/ssh/ca.pub",
          "comment": "#"
        }
      ]
    }
  }
}
